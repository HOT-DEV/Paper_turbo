<div class="collection-template-section">
  <div class="container collection-container">
    <h2 class="title">{{ block.settings.title }}</h2>
    <p class="subtitle">{{ block.settings.subtitle }}</p>
    <div class="thirteen columns medium-down--one-whole">

      {% assign products_per_row = 3 %}
      {% assign matrixType = 'collection-matrix' %}
      <div itemtype="http://schema.org/ItemList" class="product-list {{ matrixType }} clearfix equal-columns--clear equal-columns--outside-trim">
        {% for i in (1..6) %}
        {% capture product_handle %}product_{{ i }}{% endcapture %}
        {% capture product_name %}product_name_{{ i }}{% endcapture %}
        {% assign product_handle_2 = block.settings[product_handle] %}
        {% assign product_name_2 = block.settings[product_name] %}
        {% assign product = all_products[product_handle_2] %}
        <div class="
                    {% if products_per_row == 2 %}
                    eight columns
                    {% elsif products_per_row == 3 %}
                    one-third column
                    {% elsif products_per_row == 4 %}
                    four columns
                    {% elsif products_per_row == 5 %}
                    one-fifth column
                    {% elsif products_per_row == 6 %}
                    one-sixth column
                    {% else %}
                    one-seventh column
                    {% endif %}
                    {% if settings.mobile_products_per_row == '1' %}
                    medium-down--one-half
                    small-down--one-whole
                    {% else %}
                    medium-down--one-half
                    small-down--one-half
                    {% endif %}
                    thumbnail {% cycle collection_group_mobile: 'even', 'odd' %}">

          {% assign collection_handles = product.collections | map: 'handle' %}
          {% if product.featured_image.alt contains 'youtube' or image.alt contains 'vimeo' %}
          {% assign alt_text = product.title %}
          {% else %}
          {% assign alt_text = product.featured_image.alt %}
          {% endif %}

          <div class="product-wrap">
            <div class="relative product_image swap-{{ settings.collection_secondary_image }}">
              <a href="{{ product.url | within: collection }}" itemprop="url">
                <div class="image__container">
                  {% include 'image-element', image: product.featured_image, alt: alt_text, object_fit: settings.align_height, max_height: section.settings.collection_height %}
                </div>
                {% if settings.collection_secondary_image != blank %}
                <div class="image__container">
                  <img src="{% if product.images[1] != blank %}{{ product.images[1] | img_url: '800x' }}{% else %}{{ product.featured_image | img_url: '800x' }}{% endif %}"
                       class="secondary lazyload"
                       alt="{{ alt_text | escape }}"
                       />
                </div>
                {% endif %}
              </a>
              {% assign collection_handles = product.collections | map: 'handle' %}
              <div class="thumbnail-overlay">
                <a href="{{ product.url | within: collection }}" itemprop="url" class="hidden-product-link">
                  {{ product.title }}
                </a>
              </div>
            </div>
            <a class="product-info__caption {% if settings.thumbnail_hover_enabled %}hidden{% endif %}" href="{{ product.url | within: collection }}" itemprop="url">
              <div class="product-details">
                {% if product_name_2 != blank %}
                <span class="title" itemprop="name">{{ product_name_2 }}</span>
                {% else %}
                <span class="title" itemprop="name">{{ product.title }}</span>
                {% endif %}
              </div>
            </a>
          </div>
        </div>
        {% endfor %}
      </div>
      <div class="load-more__icon"></div>

    </div>
  </div>
</div>